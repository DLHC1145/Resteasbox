<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>è½¯ä»¶æœç´¢ä¸‹è½½</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: Arial, sans-serif;
			background-color: #f5f5f5;
			padding: 0;
			touch-action: pan-x pan-y;
			overflow-x: hidden;
			min-height: 100vh;
			position: relative;
			/* ç¦æ­¢é¡µé¢æ•´ä½“æ»šåŠ¨ï¼Œé¿å…å¯¼èˆªæ è·Ÿéšæ™ƒåŠ¨ */
			overflow: hidden;
		}

		html {
			touch-action: manipulation;
			-webkit-text-size-adjust: none;
			-ms-text-size-adjust: none;
			text-size-adjust: none;
		}

		/* æ ¸å¿ƒä¼˜åŒ–ï¼šiframe å®¹å™¨å›ºå®šé«˜åº¦ï¼Œå†…éƒ¨ç‹¬ç«‹æ»šåŠ¨ */
		.afdian-container {
			width: 100%;
			height: 100vh;
			border: none;
			overflow: auto; /* ä»…iframeå†…éƒ¨æ»šåŠ¨ï¼Œä¸å½±å“é¡µé¢æ•´ä½“ */
			display: block;
			position: relative;
			z-index: 1;
			/* é¿å…iframeåŠ è½½æ—¶çš„å¸ƒå±€åç§» */
			min-height: calc(100vh - 60px);
		}

		/* å¯¼èˆªæ é”å®šä¼˜åŒ–ï¼šæå‰æ¸²æŸ“+æœ€é«˜å±‚çº§+ç¡¬ä»¶åŠ é€Ÿ */
		.bottom-nav {
			position: fixed;
			bottom: 0;
			left: 0;
			width: 100%;
			height: 60px;
			background-color: #fff;
			border-top: 1px solid #e5e5e5;
			display: flex;
			justify-content: space-around;
			align-items: center;
			z-index: 9999;
			pointer-events: auto;
			/* ç¡¬ä»¶åŠ é€Ÿï¼Œé˜²æ­¢é—ªçƒ */
			transform: translateZ(0);
			-webkit-transform: translateZ(0);
			/* ç¦æ­¢å¯¼èˆªæ è‡ªèº«æ»šåŠ¨æˆ–æ™ƒåŠ¨ */
			overflow: hidden;
			/* æå‰æ¸²æŸ“ï¼Œé¿å…åŠ è½½å»¶è¿Ÿ */
			opacity: 1 !important;
			visibility: visible !important;
		}

		.nav-item {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			flex: 1;
			height: 100%;
			text-decoration: none;
			color: #999;
			transition: color 0.3s;
			pointer-events: auto;
			/* é˜²æ­¢å¯¼èˆªé¡¹è¢«æŒ¤å‹æˆ–é—ªçƒ */
			white-space: nowrap;
		}

		.nav-item.active {
			color: #4CAF50;
		}

		.nav-icon {
			width: 24px;
			height: 24px;
			margin-bottom: 4px;
			font-size: 20px;
			/* å›¾æ ‡å®¹å™¨å›ºå®šå¤§å°ï¼Œé¿å…åŠ è½½æ—¶å˜å½¢ */
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.nav-icon img {
			width: 100%;
			height: 100%;
			object-fit: contain;
			/* å›¾æ ‡åŠ è½½è¿‡æ¸¡ï¼Œå‡å°‘é—ªçƒ */
			transition: opacity 0.3s;
		}

		.nav-text {
			font-size: 12px;
			/* æ–‡æœ¬æŠ—é”¯é½¿ï¼Œæå‡æ˜¾ç¤ºç¨³å®šæ€§ */
			-webkit-font-smoothing: antialiased;
		}

		/* éšè—æ‰€æœ‰å¹²æ‰°å…ƒç´ ï¼Œé¿å…å¸ƒå±€æ³¢åŠ¨ */
		.wechat-notification, .copy-success-modal, .modal-overlay, .terms-overlay, .loading-overlay, .nav-safe-indicator {
			display: none !important;
		}
	</style>
</head>
<body>
	<!-- æå‰æ¸²æŸ“å¯¼èˆªæ ï¼Œæ”¾åœ¨iframeä¹‹å‰ï¼Œç¡®ä¿ä¼˜å…ˆåŠ è½½ -->
	<div class="bottom-nav" id="bottomNav">
		<!-- å¯¼èˆªé¡¹æå‰å†™æ­»åŸºç¡€ç»“æ„ï¼ŒJSä»…æ›´æ–°å†…å®¹ï¼Œå‡å°‘æ¸²æŸ“å»¶è¿Ÿ -->
		<a href="indexhome.html" class="nav-item active" onclick="handleNavigation(0, event)">
			<div class="nav-icon">ğŸ“</div>
			<div class="nav-text">ä¸»é¡µ</div>
		</a>
		<a href="index2.html" class="nav-item" onclick="handleNavigation(1, event)">
			<div class="nav-icon">ğŸ“</div>
			<div class="nav-text">çˆ±å‘ç”µ</div>
		</a>
		<a href="index3.html" class="nav-item" onclick="handleNavigation(2, event)">
			<div class="nav-icon">ğŸ“</div>
			<div class="nav-text">æˆ‘çš„</div>
		</a>
	</div>

	<!-- iframe æ”¾åœ¨å¯¼èˆªæ ä¹‹åï¼Œé¿å…å±‚çº§å†²çª -->
	<iframe class="afdian-container" src="https://dlhc1145.github.io/PvZMagicBox" allowfullscreen></iframe>

	<script>
		const NAV_CONFIG = [
		  { 
			icon: 'home.png', 
			text: { zh: 'ä¸»é¡µ', en: 'Home' }, 
			link: 'indexhome.html', 
			active: true 
		  },
		  { 
			icon: 'author.png', 
			text: { zh: 'çˆ±å‘ç”µ', en: 'Author' }, 
			link: 'index2.html' 
		  },
		  { 
			icon: 'my.png', 
			text: { zh: 'æˆ‘çš„', en: 'Profile' }, 
			link: 'index3.html' 
		  }
		];

		let isEnglishMode = false;

		// ç®€åŒ–è¯­è¨€å­˜å‚¨é€»è¾‘ï¼Œå‡å°‘åˆå§‹åŒ–è€—æ—¶
		function getLanguageState() {
			return localStorage.getItem('isEnglish') === 'true';
		}

		// ä¼˜åŒ–å¯¼èˆªç”Ÿæˆé€»è¾‘ï¼šä»…æ›´æ–°å†…å®¹ï¼Œä¸é‡æ„DOM
		function updateBottomNav() {
			isEnglishMode = getLanguageState();
			const navItems = document.querySelectorAll('.bottom-nav .nav-item');
			
			NAV_CONFIG.forEach((item, index) => {
				const navItem = navItems[index];
				const text = isEnglishMode ? item.text.en : item.text.zh;
				const iconContainer = navItem.querySelector('.nav-icon');
				const textContainer = navItem.querySelector('.nav-text');
				
				// æ›´æ–°é“¾æ¥
				navItem.href = item.link;
				// æ›´æ–°æ–‡æœ¬
				textContainer.textContent = text;
				// æ›´æ–°å›¾æ ‡ï¼ˆä¿ç•™å®¹é”™å¤„ç†ï¼‰
				const img = document.createElement('img');
				img.src = `img/${item.icon}`;
				img.alt = text;
				img.onerror = function() {
					this.remove();
					iconContainer.textContent = 'ğŸ“';
				};
				img.onload = function() {
					iconContainer.innerHTML = '';
					iconContainer.appendChild(this);
				};
				// æ›´æ–°æ¿€æ´»çŠ¶æ€
				item.active ? navItem.classList.add('active') : navItem.classList.remove('active');
			});
		}

		function handleNavigation(index, event) {
			event.preventDefault();
			const targetPage = NAV_CONFIG[index].link;
			// è·³è½¬å‰å…ˆæ›´æ–°æ¿€æ´»çŠ¶æ€ï¼Œé¿å…é—ªçƒ
			const navItems = document.querySelectorAll('.bottom-nav .nav-item');
			navItems.forEach((item, i) => {
				i === index ? item.classList.add('active') : item.classList.remove('active');
			});
			// å»¶è¿Ÿè·³è½¬ï¼Œç¡®ä¿çŠ¶æ€æ›´æ–°å®Œæˆ
			setTimeout(() => {
				window.location.href = targetPage;
			}, 50);
		}

		// é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ›´æ–°å¯¼èˆªï¼Œä¸ç­‰å¾…iframe
		document.addEventListener('DOMContentLoaded', function() {
			updateBottomNav();
			console.log('å¯¼èˆªæ å·²é”å®šï¼Œåˆå§‹åŒ–å®Œæˆ');
		});

		// ç¦æ­¢iframeåŠ è½½æ—¶çš„é¡µé¢æ»šåŠ¨äº‹ä»¶å†’æ³¡
		document.querySelector('.afdian-container').addEventListener('scroll', function(e) {
			e.stopPropagation();
		});
	</script>
</body>
</html>
